(this.webpackJsonpresa=this.webpackJsonpresa||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(37),s=n.n(c),i=(n(57),function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,115)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),o=(n(42),n(3)),d=n(15),l={integration:"react-1-ZEWiLzgRlUVBOSIka2ff-oM1JKZb7Wz11IqDlU4ejcDW5n-dyB9nvi-2UZhKGlX62e5O25MzT4jf6nvYtMjwcw4Z52ddt0ZLVlmbR4IJVS-tyn1ah2ARqiIv",tt:"tt-1-MEoT3ua1cNGjjdS6VPJz9M3H5MAwSnWqkY2dsyxNn58=",version:"2020-11-20"},u=n(2),j=n.n(u),b=n(7),m=n(8),h=n(5),x=n.n(h),O=n(1),f=function(e){var t=e.reservation,n=Object(r.useState)(!1),a=Object(m.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),l=Object(m.a)(i,2),u=l[0],h=l[1],f=Object(d.b)(),v=f.sync,p=f.deleteRecord,y=[t.isconfirmed?null:Object(O.jsxs)(o.Button,{onClick:function(){return h(!0)},className:"waves-effect waves-white btn-flat light-green white-text",children:[Object(O.jsx)(o.Icon,{style:{marginLeft:"-10px",marginRight:"10px"},children:"check"}),Object(O.jsx)("span",{style:{verticalAlign:"super"},children:"Valider"})]},"3"),Object(O.jsx)(o.Button,{onClick:function(){return s(!0)},className:"waves-effect waves-white btn-flat orange lighten-1 white-text right delete-btn",tooltip:"Supprimer",children:Object(O.jsx)(o.Icon,{children:"delete"})},"2")];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(o.Card,{actions:y,className:t.isconfirmed?"blue-grey darken-2 reservation-card":"blue-grey darken-3 reservation-card",closeIcon:Object(O.jsx)(o.Icon,{children:"close"}),revealIcon:Object(O.jsx)(o.Icon,{children:"more_vert"}),textClassName:"white-text",title:t.isconfirmed?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.Icon,{className:"text-lighten-1 green-text reservation-icon",children:"event_available"}),Object(O.jsx)("span",{className:"name",children:t.username}),Object(O.jsx)("span",{className:"text-lighten-1 green-text status",children:"V\xe9rifi\xe9"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.Icon,{className:"text-lighten-1 lime-text reservation-icon",children:"access_time"}),Object(O.jsx)("span",{className:"name",children:t.username}),Object(O.jsx)("span",{className:"text-lighten-1 lime-text status",children:"En attente"})]}),children:[Object(O.jsxs)("p",{children:["Du ",x()(t.datebegin).format("DD MMMM YYYY")]}),Object(O.jsxs)("p",{children:["Au ",x()(t.dateend).format("DD MMMM YYYY")]})]}),Object(O.jsxs)(o.Modal,{actions:[Object(O.jsx)(o.Button,{flat:!0,onClick:function(){s(!1)},node:"button",waves:"purple",children:"Annuler"}),Object(O.jsx)(o.Button,{type:"submit",node:"button",waves:"green",onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({record:t});case 2:return e.next=4,v();case 4:s(!1);case 5:case"end":return e.stop()}}),e)}))),children:"Confirmer"})],bottomSheet:!1,fixedFooter:!0,header:"Supprimer",open:c,options:{onCloseEnd:function(){return s(!1)}},children:["Etes-vous s\xfbr de vouloir supprimer cette r\xe9servation ?"," "]}),Object(O.jsxs)(o.Modal,{actions:[Object(O.jsx)(o.Button,{flat:!0,onClick:function(){h(!1)},node:"button",waves:"purple",children:"Annuler"}),Object(O.jsx)(o.Button,{type:"submit",node:"button",waves:"green",onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isconfirmed=!0,e.next=3,v();case 3:h(!1);case 4:case"end":return e.stop()}}),e)}))),children:"Confirmer"})],bottomSheet:!1,fixedFooter:!0,header:"Valider",open:u,options:{onCloseEnd:function(){return h(!1)}},children:["Etes-vous s\xfbr de vouloir valider cette r\xe9servation ?"," "]})]})},v=function(){return Object(O.jsx)(o.Row,{className:"loader-wrapper center-align",children:Object(O.jsx)(o.Preloader,{active:!0,color:"blue",flashing:!0})})},p=function(e){var t=e.title,n=e.onSelect;return Object(O.jsx)(o.DatePicker,{id:t,options:{autoClose:!0,container:"body",defaultDate:null,disableDayFn:null,disableWeekends:!1,events:[],firstDay:0,format:"dddd d mmmm, yyyy",i18n:{cancel:"Annuler",clear:"Effacer",done:"Ok",months:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aut","Sep","Oct","Nov","Dec"],nextMonth:"\u203a",previousMonth:"\u2039",weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysAbbrev:["D","L","M","M","J","V","S"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},isRTL:!1,maxDate:null,minDate:null,onClose:null,onDraw:null,onOpen:null,onSelect:n,parse:null,setDefaultDate:!1,showClearBtn:!1,showDaysInNextAndPreviousMonths:!1,showMonthAfterYear:!1,yearRange:10},children:t})},y=n(21),M=n.n(y),g=a.a.createContext({beginDate:null,endDate:null,isLoadingEvents:!1,events:[]}),D=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],c=t[1],s=Object(r.useContext)(g),i=s.beginDate,l=s.setBeginDate,u=s.endDate,h=s.setEndDate,f=Object(d.b)(),y=f.Frame,D=f.sync,w=a.a.createRef(),N=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.current&&w.current.value){e.next=5;break}w.current.className="validate invalid",e.next=11;break;case 5:if(!k()){e.next=11;break}return c(!0),y().push({username:t,isconfirmed:!1,datebegin:i.format("YYYY-MM-DD"),dateend:u.format("YYYY-MM-DD")}),e.next=10,D();case 10:c(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=!1;i&&u?y().find((function(e){return i.isBetween(x()(e.datebegin),x()(e.dateend))||u.isBetween(x()(e.datebegin),x()(e.dateend))}))?M.a.toast({html:"D\xe9j\xe0 r\xe9serv\xe9."}):i.isAfter(x()())?i.isAfter(u)?M.a.toast({html:"La date de fin de peut pas \xeatre avant la date de d\xe9but."}):e=!0:M.a.toast({html:"La date de d\xe9but ne peut pas \xeatre avant aujourd'hui."}):(!i&&M.a.toast({html:"Hop hop hop, et la date de d\xe9but l\xe0 !"}),!u&&M.a.toast({html:"Hop hop hop, et la date de fin l\xe0 !"}));return e};return n?Object(O.jsx)(v,{}):Object(O.jsxs)(o.Modal,{id:"addModal",header:"Choix des dates",trigger:Object(O.jsx)(o.Button,{floating:!0,fab:{direction:"left"},icon:Object(O.jsx)(o.Icon,{children:"add"}),large:!0,node:"button",waves:"light",className:"pulse"}),actions:[Object(O.jsx)(o.Button,{flat:!0,modal:"close",node:"button",waves:"green",children:"Fermer"})],children:[Object(O.jsx)(o.TextInput,{label:"Pr\xe9nom",ref:w,error:"Oulala tu vas avoir des probl\xe8mes !",success:"Good to go !",validate:!0}),Object(O.jsx)(p,{title:"Date de d\xe9but",onSelect:function(e){return l(x()(e))}}),Object(O.jsx)(p,{title:"Date de fin",onSelect:function(e){return h(x()(e))}}),Object(O.jsxs)(o.Button,{onClick:N,style:{position:"absolute",bottom:"15px"},children:["Valider",Object(O.jsx)(o.Icon,{right:!0,children:"send"})]})]})},w=function(){var e=Object(r.useState)(!0),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(d.b)(),s=c.Frame,i=c.sync,l=c.configureFrame;return Object(r.useEffect)((function(){Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,l({tableName:"RESERVATION",limit:null});case 3:return e.next=5,i();case 5:a(!1);case 6:case"end":return e.stop()}}),e)})))()}),[]),n?Object(O.jsx)(v,{}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.Row,{children:s().map((function(e,t){return Object(O.jsx)(o.Col,{m:6,s:12,children:Object(O.jsx)(f,{reservation:e})},t)}))}),Object(O.jsx)(D,{})]})},N=a.a.createContext({period:"year",currentDate:x()().date(1),setTheme:function(){}}),k=n(10),_=n(26),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?Object(_.a)(Array(e).keys()).map((function(e){return e+t})):[]},S=function(e){for(var t=0,n="#",r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);for(var a=0;a<3;a++){n+=("00"+(t>>8*a&255).toString(16)).substr(-2)}return n},L=function(e){var t=e.month,n=e.day,a=Object(r.useContext)(N).currentDate,c=Object(r.useContext)(g).events,s=c.find((function(e){return x()({year:a.year(),month:parseInt(x()().month(t).format("MM"))-1,day:n}).isBetween(x()(e.datebegin).subtract("1","day"),x()(e.dateend))})),i=function(){return x()({year:a.year(),month:parseInt(x()().month(t).format("MM"))-1,day:n}).isSame(x()(),"day")?n>=10?"day-today double-number":"day-today":s?n>=10?"day-reserved double-number":"day-reserved":""};return Object(O.jsx)("div",{className:"day",children:s?Object(O.jsx)(o.Button,{className:i(),tooltip:s.username,style:{backgroundColor:S(s.username)},children:n}):Object(O.jsx)("div",{className:i(),children:n})})},I=function(e){var t=e.month,n=Object(r.useContext)(N).currentDate,a=["l","m","m","j","v","s","d"],c=0===x()(Object(k.a)({},n)).month(t).weekday()?7:x()(Object(k.a)({},n)).month(t).weekday();return a=a.slice(c-1,a.length).concat(a.slice(0,c-1)),Object(O.jsx)("div",{className:"header-small-days",children:a.map((function(e,t){return Object(O.jsx)("div",{className:"year-day",children:e},t)}))})},Y=function(e){var t=e.month,n=Object(r.useContext)(N).currentDate,a=C(x()(Object(k.a)({},n)).month(t).daysInMonth(),1);return Object(O.jsxs)(o.Col,{className:"month",s:12,m:3,children:[Object(O.jsx)("h4",{className:x()().format("MMMM")===t&&n.year()===x()().year()?"capitalize teal-text":"capitalize",children:t}),Object(O.jsx)(I,{month:t}),Object(O.jsx)("div",{className:"month-days",children:a.map((function(e,n){return Object(O.jsx)(L,{month:t,day:e},n)}))})]})},B=function(){var e=Object(r.useContext)(N).currentDate;return Object(O.jsxs)("div",{className:"year-calendar",children:[Object(O.jsx)("h4",{className:"teal-text",children:Object(O.jsx)("strong",{children:e.year()})}),Object(O.jsx)(o.Row,{children:x.a.months().map((function(e,t){return Object(O.jsx)(Y,{month:e},t)}))})]})},E=function(){var e=Object(r.useContext)(N).currentDate,t=Object(r.useContext)(g).events,n=e.format("MMMM"),a=e.year(),c=x.a.weekdays(!0),s=x.a.weekdaysShort(!0),i=function(n){return t.find((function(t){return x()({year:e.year(),month:parseInt(e.format("MM"))-1,day:n}).isBetween(x()(t.datebegin).subtract("1","day"),x()(t.dateend))}))},d=function(t){return x()({year:e.year(),month:parseInt(e.format("MM"))-1,day:t.number}).isSame(x()(),"day")},l=function(e){var t="";return t+=e.isInMonth?"in-month":"out-of-month",d(e)?(t+=" day-today",e.number>=10&&(t+=" double-number")):i(e.number)&&(e.number>=10?t+=" day-reserved double-number":t+=" day-reserved"),t},u=function(){var t=[],r=C(e.daysInMonth(),1),a=x()(Object(k.a)({},e)).month(n).subtract(1,"month").daysInMonth(),c=0===x()(Object(k.a)({},e)).month(n).weekday()?7:x()(Object(k.a)({},e)).month(n).weekday(),s=C(c-1,a+2-c).map((function(e){return{isInMonth:!1,number:e}})),i=r.map((function(e){return{isInMonth:!0,number:e}})),o=s.concat(i);return[7,14,21,28,35,42].forEach((function(e,n){t[n]=o.slice(e-7,e)})),t}();return Object(O.jsxs)("div",{className:"month-calendar",children:[Object(O.jsxs)("h4",{className:"capitalize",children:[Object(O.jsx)("span",{className:n===x()().format("MMMM")&&e.year()===x()().year()?"amber-text":"teal-text",children:Object(O.jsx)("strong",{children:n})})," ",a]}),Object(O.jsxs)(o.Table,{className:"centered hide-on-small-only",children:[Object(O.jsx)("thead",{children:Object(O.jsx)("tr",{children:c.map((function(e,t){return Object(O.jsx)("th",{"data-field":"day",className:"capitalize",children:e},t)}))})}),Object(O.jsx)("tbody",{children:u.map((function(e,t){return Object(O.jsx)("tr",{children:e.map((function(e,t){return i(e.number)?Object(O.jsx)("td",{children:Object(O.jsx)(o.Button,{className:l(e),tooltip:i(e.number).username,style:{backgroundColor:S(i(e.number).username)},children:e.number},t)},t):d(e)?Object(O.jsx)("td",{children:Object(O.jsx)(o.Button,{className:l(e),children:e.number})},t):Object(O.jsx)("td",{className:l(e),children:e.number},t)}))},t)}))})]}),Object(O.jsxs)(o.Table,{className:"centered hide-on-med-and-up",children:[Object(O.jsx)("thead",{children:Object(O.jsx)("tr",{children:s.map((function(e,t){return Object(O.jsx)("th",{"data-field":"day",className:"capitalize",children:e},t)}))})}),Object(O.jsx)("tbody",{children:u.map((function(e,t){return Object(O.jsx)("tr",{children:e.map((function(e,t){return i(e.number)?Object(O.jsx)("td",{children:Object(O.jsx)(o.Button,{className:l(e),tooltip:i(e.number).username,children:e.number},t)},t):Object(O.jsx)("td",{className:l(e),children:e.number},t)}))},t)}))})]})]})},A=function(){var e=Object(r.useContext)(N).period;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"year"!==e?"hide":"",children:Object(O.jsx)(B,{})}),Object(O.jsx)("div",{className:"month"!==e?"hide":"",children:Object(O.jsx)(E,{})}),Object(O.jsx)(D,{})]})},F=function(){return Object(r.useContext)(g).isLoadingEvents?Object(O.jsx)(v,{}):Object(O.jsx)(A,{})},R=[{path:"/",exact:!0,component:F},{path:"/resa",exact:!0,component:F},{path:"/reservations",exact:!0,component:w}],T=n(9),P=n(25),J=function(){var e=Object(r.useContext)(N),t=e.period,n=e.currentDate,a=e.setCurrentDate,c=x()(Object(k.a)({},n));return"/reservations"!==Object(T.f)().pathname?Object(O.jsxs)(o.Row,{className:"center-align controls",style:{marginRight:"25px"},children:[Object(O.jsxs)(o.Button,{className:"teal darken-1",onClick:function(){return a(x()())},children:[Object(O.jsx)(o.Icon,{className:"today-icon",children:"insert_invitation"}),Object(O.jsx)("span",{className:"today-text",children:"Aujourd'hui"})]}),Object(O.jsx)(o.Button,{className:"teal darken-1",style:{marginLeft:"25px",marginRight:"5px"},onClick:function(){return a(c.subtract(1,t))},children:Object(O.jsx)(o.Icon,{style:{height:"40px",lineHeight:"40px"},children:"chevron_left"})}),Object(O.jsx)(o.Button,{className:"teal darken-1",onClick:function(){return a(c.add(1,t))},children:Object(O.jsx)(o.Icon,{style:{height:"40px",lineHeight:"40px"},children:"chevron_right"})})]}):null},H=function(){var e=Object(r.useContext)(N),t=e.period,n=e.setPeriod;return Object(O.jsx)("div",{id:"menu-navbar",children:Object(O.jsxs)(o.Navbar,{alignLinks:"right",brand:Object(O.jsx)("div",{className:"brand-logo",children:Object(O.jsx)(J,{})}),id:"mobile-nav",menuIcon:Object(O.jsx)(o.Icon,{children:"menu"}),style:{backgroundColor:"#26a69a"},fixed:!0,children:[Object(O.jsx)(o.Switch,{id:"switch-theme",offLabel:"Ann\xe9e",onChange:function(){n("month"===t?"year":"month")},onLabel:"Mois",checked:"month"===t}),Object(O.jsx)(P.b,{to:"/",children:"Calendrier"}),Object(O.jsx)(P.b,{to:"/reservations",children:"R\xe9servations"})]})})};x.a.locale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?"er":"e")},meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},week:{dow:1,doy:4}});var V=function(e){var t=e.children,n=Object(r.useState)("year"),a=Object(m.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(x()().date(1)),o=Object(m.a)(i,2),d={period:c,setPeriod:s,currentDate:o[0],setCurrentDate:o[1]};return x.a.locale("fr"),Object(O.jsx)(N.Provider,{value:d,children:t})},z=function(e){var t=e.children,n=Object(r.useState)({}),a=Object(m.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)({}),o=Object(m.a)(i,2),l=o[0],u=o[1],h=Object(r.useState)(!0),x=Object(m.a)(h,2),f=x[0],v=x[1],p=Object(r.useState)(!1),y=Object(m.a)(p,2),M=y[0],D=y[1],w=Object(r.useState)([]),N=Object(m.a)(w,2),k=N[0],_=N[1],C={beginDate:c,setBeginDate:s,endDate:l,setEndDate:u,isLoadingEvents:f,events:k},S=Object(d.b)(),L=S.Query;return(0,S.useFrameEffect)((function(){D(!M)})),Object(r.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,L({queryName:"confirmed",tableName:"RESERVATION"});case 3:t=e.sent,_(t),v(!1);case 6:case"end":return e.stop()}}),e)})))()}),[M]),Object(O.jsx)(g.Provider,{value:C,children:t})},W=function(){return Object(O.jsx)(V,{children:Object(O.jsx)(d.a,{ebconfig:l,children:Object(O.jsxs)(z,{children:[Object(O.jsx)("div",{className:"hide",children:M.a.version}),Object(O.jsx)(H,{}),Object(O.jsx)(o.Container,{id:"mainContainer",style:{padding:"15px"},children:Object(O.jsx)(T.c,{children:R.map((function(e,t){return Object(O.jsx)(T.a,{path:e.path,exact:e.exact,children:Object(O.jsx)(e.component,{})},t)}))})})]})})})};var q=function(){return Object(O.jsx)(P.a,{children:Object(O.jsx)(W,{})})};s.a.render(Object(O.jsx)(q,{}),document.getElementById("root")),i()},42:function(e,t,n){},57:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.99565159.chunk.js.map