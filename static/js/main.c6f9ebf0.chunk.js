(this.webpackJsonpresa=this.webpackJsonpresa||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),s=n.n(c),i=(n(57),function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,115)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))}),o=(n(42),n(5)),d=n(19),l={integration:"react-1-ZEWiLzgRlUVBOSIka2ff-oM1JKZb7Wz11IqDlU4ejcDW5n-dyB9nvi-2UZhKGlX62e5O25MzT4jf6nvYtMjwcw4Z52ddt0ZLVlmbR4IJVS-tyn1ah2ARqiIv",tt:"tt-1-MEoT3ua1cNGjjdS6VPJz9M3H5MAwSnWqkY2dsyxNn58=",version:"2020-11-20"},u=n(2),j=n.n(u),b=n(7),m=n(9),h=n(20),x=n(4),O=n.n(x),f=n(1),v=function(e){var t=e.reservation;e.index;return Object(f.jsxs)(o.Card,{actions:[Object(f.jsx)(h.b,{to:"/",children:"Voir"},"1")],className:"blue-grey darken-1 reservation-card",closeIcon:Object(f.jsx)(o.Icon,{children:"close"}),revealIcon:Object(f.jsx)(o.Icon,{children:"more_vert"}),textClassName:"white-text",title:t.username,children:[Object(f.jsx)(o.Badge,{className:t.isconfirmed?"green white-text":"lime white-text",children:t.isconfirmed?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.Icon,{children:"check"}),Object(f.jsx)("span",{className:"status",children:"V\xe9rifi\xe9"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.Icon,{children:"access_time"}),Object(f.jsx)("span",{className:"status",children:"En attente"})]})}),Object(f.jsxs)("p",{children:[O()(t.datebegin).format("DD MMMM YYYY")," ->"," ",O()(t.dateend).format("DD MMMM YYYY")]})]})},p=function(){return Object(f.jsx)(o.Row,{className:"loader-wrapper center-align",children:Object(f.jsx)(o.Preloader,{active:!0,color:"blue",flashing:!0})})},y=function(e){var t=e.title,n=e.onSelect;return Object(f.jsx)(o.DatePicker,{id:t,options:{autoClose:!0,container:"body",defaultDate:null,disableDayFn:null,disableWeekends:!1,events:[],firstDay:0,format:"dddd d mmmm, yyyy",i18n:{cancel:"Annuler",clear:"Effacer",done:"Ok",months:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aut","Sep","Oct","Nov","Dec"],nextMonth:"\u203a",previousMonth:"\u2039",weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysAbbrev:["D","L","M","M","J","V","S"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},isRTL:!1,maxDate:null,minDate:null,onClose:null,onDraw:null,onOpen:null,onSelect:n,parse:null,setDefaultDate:!1,showClearBtn:!1,showDaysInNextAndPreviousMonths:!1,showMonthAfterYear:!1,yearRange:10},children:t})},M=n(22),D=n.n(M),g=r.a.createContext({beginDate:null,endDate:null,isLoadingEvents:!1,events:[]}),_=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],c=t[1],s=Object(a.useContext)(g),i=s.beginDate,l=s.setBeginDate,u=s.endDate,h=s.setEndDate,x=Object(d.b)(),v=x.Frame,M=x.sync,_=r.a.createRef(),N=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.current&&_.current.value){e.next=5;break}_.current.className="validate invalid",e.next=11;break;case 5:if(!w()){e.next=11;break}return c(!0),v().push({username:t,isconfirmed:!1,datebegin:i.format("YYYY-MM-DD"),dateend:u.format("YYYY-MM-DD")}),e.next=10,M();case 10:c(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=!1;i&&u?v().find((function(e){return i.isBetween(O()(e.datebegin),O()(e.dateend))||u.isBetween(O()(e.datebegin),O()(e.dateend))}))?D.a.toast({html:"D\xe9j\xe0 r\xe9serv\xe9."}):i.isAfter(O()())?i.isAfter(u)?D.a.toast({html:"La date de fin de peut pas \xeatre avant la date de d\xe9but."}):e=!0:D.a.toast({html:"La date de d\xe9but ne peut pas \xeatre avant aujourd'hui."}):(!i&&D.a.toast({html:"Hop hop hop, et la date de d\xe9but l\xe0 !"}),!u&&D.a.toast({html:"Hop hop hop, et la date de fin l\xe0 !"}));return e};return n?Object(f.jsx)(p,{}):Object(f.jsxs)(o.Modal,{id:"addModal",header:"Choix des dates",trigger:Object(f.jsx)(o.Button,{floating:!0,fab:{direction:"left"},icon:Object(f.jsx)(o.Icon,{children:"add"}),large:!0,node:"button",waves:"light"}),actions:[Object(f.jsx)(o.Button,{flat:!0,modal:"close",node:"button",waves:"green",children:"Fermer"})],children:[Object(f.jsx)(o.TextInput,{label:"Pr\xe9nom",ref:_,error:"Oulala tu vas avoir des probl\xe8mes !",success:"Good to go !",validate:!0}),Object(f.jsx)(y,{title:"Date de d\xe9but",onSelect:function(e){return l(O()(e))}}),Object(f.jsx)(y,{title:"Date de fin",onSelect:function(e){return h(O()(e))}}),Object(f.jsxs)(o.Button,{onClick:N,style:{position:"absolute",bottom:"15px"},children:["Valider",Object(f.jsx)(o.Icon,{right:!0,children:"send"})]})]})},N=function(){var e=Object(a.useState)(!0),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(d.b)(),s=c.Frame,i=c.sync,l=c.configureFrame;return Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,l({tableName:"RESERVATION",limit:10});case 3:return e.next=5,i();case 5:r(!1);case 6:case"end":return e.stop()}}),e)})))()}),[]),n?Object(f.jsx)(p,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.Row,{children:s().map((function(e,t){return Object(f.jsx)(o.Col,{m:6,s:12,children:Object(f.jsx)(v,{reservation:e,index:t})},t)}))}),Object(f.jsx)(_,{})]})},w=r.a.createContext({period:"month",currentDate:O()().date(1),setTheme:function(){}}),k=n(10),C=n(26),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?Object(C.a)(Array(e).keys()).map((function(e){return e+t})):[]},Y=function(e){var t=e.month,n=e.day,r=Object(a.useContext)(w).currentDate,c=Object(a.useContext)(g).events,s=c.find((function(e){return O()({year:r.year(),month:parseInt(O()().month(t).format("MM"))-1,day:n}).isBetween(O()(e.datebegin).subtract("1","day"),O()(e.dateend))})),i=function(){return O()({year:r.year(),month:parseInt(O()().month(t).format("MM"))-1,day:n}).isSame(O()(),"day")?n>=10?"day-today double-number":"day-today":s?n>=10?"day-reserved double-number":"day-reserved":""};return Object(f.jsx)("div",{className:"day",children:s?Object(f.jsx)(o.Button,{className:i(),tooltip:s.username,children:n}):Object(f.jsx)("div",{className:i(),children:n})})},S=function(e){var t=e.month,n=Object(a.useContext)(w).currentDate,r=["l","m","m","j","v","s","d"],c=0===O()(Object(k.a)({},n)).month(t).weekday()?7:O()(Object(k.a)({},n)).month(t).weekday();return r=r.slice(c-1,r.length).concat(r.slice(0,c-1)),Object(f.jsx)("div",{className:"header-small-days",children:r.map((function(e,t){return Object(f.jsx)("div",{className:"year-day",children:e},t)}))})},I=function(e){var t=e.month,n=Object(a.useContext)(w).currentDate,r=L(O()(Object(k.a)({},n)).month(t).daysInMonth(),1);return Object(f.jsxs)(o.Col,{className:"month",s:12,m:3,children:[Object(f.jsx)("h4",{className:O()().format("MMMM")===t&&n.year()===O()().year()?"capitalize teal-text":"capitalize",children:t}),Object(f.jsx)(S,{month:t}),Object(f.jsx)("div",{className:"month-days",children:r.map((function(e,n){return Object(f.jsx)(Y,{month:t,day:e},n)}))})]})},E=function(){var e=Object(a.useContext)(w).currentDate;return Object(f.jsxs)("div",{className:"year-calendar",children:[Object(f.jsx)("h4",{className:"teal-text",children:Object(f.jsx)("strong",{children:e.year()})}),Object(f.jsx)(o.Row,{children:O.a.months().map((function(e,t){return Object(f.jsx)(I,{month:e},t)}))})]})},T=function(){var e=Object(a.useContext)(w).currentDate,t=e.format("MMMM"),n=e.year(),r=O.a.weekdays(!0),c=O.a.weekdaysShort(!0),s=function(t){var n="";return n+=t.isInMonth?"in-month":"out-of-month",function(t){return O()({year:e.year(),month:parseInt(e.format("MM"))-1,day:t.number}).isSame(O()(),"day")}(t)&&(n+=" day-today",t.number>=10&&(n+=" double-number")),n},i=function(){var n=[],a=L(e.daysInMonth(),1),r=O()(Object(k.a)({},e)).month(t).subtract(1,"month").daysInMonth(),c=0===O()(Object(k.a)({},e)).month(t).weekday()?7:O()(Object(k.a)({},e)).month(t).weekday(),s=L(c-1,r+2-c).map((function(e){return{isInMonth:!1,number:e}})),i=a.map((function(e){return{isInMonth:!0,number:e}})),o=s.concat(i);return[7,14,21,28,35,42].forEach((function(e,t){n[t]=o.slice(e-7,e)})),n}();return Object(f.jsxs)("div",{className:"month-calendar",children:[Object(f.jsxs)("h4",{className:"capitalize",children:[Object(f.jsx)("span",{className:t===O()().format("MMMM")&&e.year()===O()().year()?"amber-text":"teal-text",children:Object(f.jsx)("strong",{children:t})})," ",n]}),Object(f.jsxs)(o.Table,{className:"centered hide-on-small-only",children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{children:r.map((function(e,t){return Object(f.jsx)("th",{"data-field":"day",className:"capitalize",children:e},t)}))})}),Object(f.jsx)("tbody",{children:i.map((function(e,t){return Object(f.jsx)("tr",{children:e.map((function(e,t){return Object(f.jsx)("td",{className:s(e),children:e.number},t)}))},t)}))})]}),Object(f.jsxs)(o.Table,{className:"centered hide-on-med-and-up",children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{children:c.map((function(e,t){return Object(f.jsx)("th",{"data-field":"day",className:"capitalize",children:e},t)}))})}),Object(f.jsx)("tbody",{children:i.map((function(e,t){return Object(f.jsx)("tr",{children:e.map((function(e,t){return Object(f.jsx)("td",{className:s(e),children:e.number},t)}))},t)}))})]})]})},A=function(){var e=Object(a.useContext)(w),t=e.period,n=e.currentDate,r=e.setCurrentDate,c=O()(Object(k.a)({},n));return Object(f.jsxs)(o.Row,{className:"center-align",style:{marginTop:"30px"},children:[Object(f.jsx)(o.Button,{className:"teal darken-1",onClick:function(){return r(O()())},children:"Aujourd'hui"}),Object(f.jsx)(o.Button,{className:"teal darken-1",style:{marginLeft:"25px",marginRight:"5px"},onClick:function(){return r(c.subtract(1,t))},children:Object(f.jsx)(o.Icon,{children:"chevron_left"})}),Object(f.jsx)(o.Button,{className:"teal darken-1",onClick:function(){return r(c.add(1,t))},children:Object(f.jsx)(o.Icon,{children:"chevron_right"})})]})},B=function(){var e=Object(a.useContext)(w).period;return Object(f.jsxs)(f.Fragment,{children:["year"===e&&Object(f.jsx)(A,{}),Object(f.jsx)("div",{className:"year"!==e?"hide":"",children:Object(f.jsx)(E,{})}),Object(f.jsx)("div",{className:"month"!==e?"hide":"",children:Object(f.jsx)(T,{})}),Object(f.jsx)(A,{}),Object(f.jsx)(_,{})]})},P=[{path:"/",exact:!0,component:function(){return Object(a.useContext)(g).isLoadingEvents?Object(f.jsx)(p,{}):Object(f.jsx)(B,{})}},{path:"/reservations",exact:!0,component:N}],F=n(8),R=function(){var e=Object(a.useContext)(w),t=e.period,n=e.setPeriod;return Object(f.jsx)("div",{id:"menu-navbar",children:Object(f.jsxs)(o.Navbar,{alignLinks:"right",brand:Object(f.jsxs)("div",{className:"brand-logo",children:[Object(f.jsx)(o.Icon,{medium:!0,className:"teal-text text-darken-3",children:"house"}),Object(f.jsx)("span",{children:"Camprieu"})]}),id:"mobile-nav",menuIcon:Object(f.jsx)(o.Icon,{children:"menu"}),style:{backgroundColor:"#26a69a"},children:[Object(f.jsx)(o.Switch,{id:"switch-theme",offLabel:"Ann\xe9e",onChange:function(){n("month"===t?"year":"month")},onLabel:"Mois",checked:"month"===t}),Object(f.jsx)(h.b,{to:"/",children:"Calendrier"}),Object(f.jsx)(h.b,{to:"/reservations",children:"R\xe9servations"})]})})};O.a.locale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?"er":"e")},meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},week:{dow:1,doy:4}});var J=function(e){var t=e.children,n=Object(a.useState)("month"),r=Object(m.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(O()().date(1)),o=Object(m.a)(i,2),d={period:c,setPeriod:s,currentDate:o[0],setCurrentDate:o[1]};return O.a.locale("fr"),Object(f.jsx)(w.Provider,{value:d,children:t})},V=function(e){var t=e.children,n=Object(a.useState)({}),r=Object(m.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)({}),o=Object(m.a)(i,2),l=o[0],u=o[1],h=Object(a.useState)(!0),x=Object(m.a)(h,2),O=x[0],v=x[1],p=Object(a.useState)([]),y=Object(m.a)(p,2),M=y[0],D=y[1],_={beginDate:c,setBeginDate:s,endDate:l,setEndDate:u,isLoadingEvents:O,events:M},N=Object(d.b)().Query;return Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,N({queryName:"confirmed",tableName:"RESERVATION"});case 3:t=e.sent,D(t),v(!1);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(f.jsx)(g.Provider,{value:_,children:t})},H=function(){return Object(f.jsx)(J,{children:Object(f.jsx)(d.a,{ebconfig:l,children:Object(f.jsxs)(V,{children:[Object(f.jsx)("div",{className:"hide",children:D.a.version}),Object(f.jsx)(R,{}),Object(f.jsx)(o.Container,{id:"mainContainer",style:{padding:"15px"},children:Object(f.jsx)(F.c,{children:P.map((function(e,t){return Object(f.jsx)(F.a,{path:e.path,exact:e.exact,children:Object(f.jsx)(e.component,{})},t)}))})})]})})})};var z=function(){return Object(f.jsx)(h.a,{children:Object(f.jsx)(H,{})})};s.a.render(Object(f.jsx)(z,{}),document.getElementById("root")),i()},42:function(e,t,n){},57:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.c6f9ebf0.chunk.js.map